# å¦‚ä½•å†™ä¸€ä»½åˆæ ¼çš„ADR


## ä»€ä¹ˆæ˜¯ ADR

> *ADR* å³*Architectural Decision Records*ï¼Œæ¶æ„å†³ç­–è®°å½•ã€‚
>
> * æ¶æ„å†³ç­–ï¼ˆADï¼‰æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡é€‰æ‹©ï¼Œé’ˆå¯¹åŠŸèƒ½æ€§æˆ–éåŠŸèƒ½æ€§çš„éœ€æ±‚è¿›è¡Œçš„é€‰æ‹©è®¾è®¡ã€‚
>
> * æ¶æ„ä¸Šé‡è¦çš„è¦æ±‚ï¼ˆASR, Architecturally Significant Requirementï¼‰æ˜¯å¯¹ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„ä½“ç³»ç»“æ„å’Œè´¨é‡è¡¡é‡æ•ˆæœçš„è¦æ±‚ã€‚
>
> * æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰æ•æ‰ADï¼Œå¦‚ç»å¸¸åšå†™ä¸ªäººç¬”è®°æˆ–ä¼šè®®è®°å½•æ—¶; åœ¨é¡¹ç›®ä¸­åˆ›å»ºå’Œç»´æŠ¤çš„ADRé›†åˆæ„æˆå…¶å†³ç­–æ—¥å¿—ã€‚

æ‰€æœ‰è¿™äº›éƒ½å±äºæ¶æ„çŸ¥è¯†ç®¡ç†(AKM)çš„ä¸»é¢˜ã€‚

![Photo by Josep Martins](https://images.unsplash.com/photo-1583591900414-7031eb309cb6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=675&q=80)

## ADR èƒ½å¹²ä»€ä¹ˆ

* å®ƒå¯ä»¥è®°å½•æŸäº›å†³å®šèƒŒåçš„åŠ¨æœº.

å…¶å®è¿™ä¸€æ¡å°±å¤Ÿäº†ï¼Œåœ¨æ•æ·é¡¹ç›®æˆ–è€…å¤§å‹é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾é¿å…ä½œå‡ºæ¶æ„å˜æ›´çš„æ“ä½œã€‚å¦‚æœä¸€æ¬¡æ¬¡çš„å˜æ›´éƒ½æ²¡æœ‰è®°å½•ï¼Œå¯¹äºåæ¥çš„å¼€å‘è€…æˆ–è€…ç»´æŠ¤è€…éƒ½ä¼šæ˜¯ç¾éš¾ã€‚
åœ¨æ²¡æœ‰æ–‡æ¡£æˆ–è€…å‰äººçš„æŒ‡å¯¼ä¸‹ï¼Œå¦‚æœä½¿ç”¨æ–°çš„æ¶æ„å˜æ›´å¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„ bug å‡ºç°ã€‚

ä¸ºäº†èƒ½ä½¿åæ¥è€…äº†è§£é¡¹ç›®æ¶æ„å˜åŒ–æˆ–è€…æ›´å¥½çš„ç»´æŠ¤é¡¹ç›®ï¼Œå°†é‡è¦çš„æ¶æ„å˜æ›´è®°å½•ä¸‹æ¥æ˜¯éå¸¸é‡è¦çš„ã€‚

* ä¸ºå®¢æˆ·æ›´å¥½çš„å‘ˆç°ç°è±¡åŠè§£å†³æ–¹æ¡ˆ

å½“ä½ ä½œä¸ºä¹™æ–¹ï¼Œä¸ºä½ çš„ç”²æ–¹å¼€å‘ç³»ç»Ÿï¼Œçªç„¶æœ‰ä¸€ä¸ªåŠŸèƒ½è¦æ›´æ”¹ä¹‹å‰çš„æ¶æ„è®¾è®¡ï¼Œé‚£ä¹ˆä½ çš„è¿™æ¬¡çš„æ¶æ„å˜æ›´åº”è¯¥éœ€è¦è®©ç”²æ–¹çŸ¥é“å¹¶åŒæ„ï¼Œæœ€å¥½çš„æ–¹æ¡ˆå°±æ˜¯ç»™ä»– show ä¸€ä¸ªADR.

* æ¢³ç†ä¸šåŠ¡

ADR æ˜¯ä¸€ä¸ªæ€è€ƒè¿‡ç¨‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè®°å½•è¿‡ç¨‹ï¼› å°†æŠ½è±¡çš„æ€è€ƒï¼Œä»¥æ–‡å­—å’Œå›¾è¡¨ç­‰çš„å½¢å¼è®°å½•ä¸‹æ¥ï¼Œå¯ä»¥æ›´å¥½åœ°è¾…åŠ©æˆ‘ä»¬ç†è§£ä¸šåŠ¡ï¼Œå…±äº«çŸ¥è¯†ã€‚

![Photo by Brandi Redd](https://images.unsplash.com/photo-1470790376778-a9fbc86d70e2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=649&q=80)

## ä»€ä¹ˆæƒ…å†µä¸‹è¦ä½¿ç”¨ADR

å¦‚ä¸Šæ‰€è¯´ï¼Œåœ¨é¡¹ç›®æ¶æ„æœ‰é‡å¤§å˜æ›´çš„æ—¶å€™éœ€è¦åšè®°å½•, è®©æ‰€æœ‰å…³ç³»äººéƒ½äº†è§£åˆ°è¿™æ¬¡å˜æ›´ã€‚åœ¨æ­¤éœ€è¦è¯´ä¸€ä¸‹ï¼Œå¯¹äºæ•æ·å®£è¨€å…¶ä¸­æœ‰ä¸€å¥ï¼Œ`å·¥ä½œçš„è½¯ä»¶é«˜äºè¯¦å°½çš„æ–‡æ¡£`ï¼Œ è¿™å¥è¯çš„æ„æ€ä¸æ˜¯ä¸å†™æ–‡æ¡£ã€‚æ‰€ä»¥ï¼Œå¿…è¦çš„æ–‡æ¡£è¿˜æ˜¯è¦å†™çš„ã€‚

## æ€ä¹ˆå†™å‘¢

### æ ‡é¢˜

æ ‡é¢˜(Title) å»ºè®®ä»¥ `ADR-[åºå·]-[é¡¹ç›®/å›¢é˜Ÿåç§°]-[ADRä¸»é¢˜]` è¿™æ ·çš„å½¢å¼ï¼Œç›´è§‚ä¸”æœ‰åºã€‚

### æ€»ç»“(Summary)

è¿™éƒ¨åˆ†çš„ä¸»è¦ä»»åŠ¡æ˜¯è®©åˆ«äººå¿«é€ŸçŸ¥é“ä½ çš„è¿™æ¬¡ ADR çš„ä¸Šä¸‹æ–‡(Context)æ˜¯ä»€ä¹ˆï¼Œæœ‰å“ªäº›ç›®æ ‡(Objective),æœ‰å“ªäº›å¤‡é€‰æ–¹æ¡ˆ(Options)ï¼Œè°åœ¨ä¸»å¯¼(Owner), æœ‰è°å®¡é˜…äº†(Reviews),æœ‰å“ªäº›ç›¸å…³çš„å†³ç­–(Related Decisions), å½“å‰ ADR çš„çŠ¶æ€(Status)æ˜¯ä»€ä¹ˆç­‰ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ ADR å¼€å§‹çš„æ—¶å€™ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ä½“æ¦‚æ‹¬å½“å‰ ADR çš„ä¸€äº›çŠ¶æ€ã€‚æ¯”å¦‚ï¼š

|Item|Content|
|-|-|
|åç§°(Title)| ADRçš„æ ‡é¢˜|
|åºå·(ID)| ADR åºåˆ—å·|
|ä¸»å¯¼äºº(Owner)| è´Ÿè´£äºº|
|å®¡é˜…äºº(Reviewers)| å‚ä¸çš„å®¡é˜…è€…|
|ä¸Šä¸‹æ–‡(Context)| è¿™é‡Œä»‹ç»ADRçš„èƒŒæ™¯(background)ï¼Œç›®æ ‡(objective)ï¼Œæ˜¯å¦ç´§æ€¥(urgent)ï¼Œå¦‚æœä¸è§£å†³ä¼šæœ‰ä»€ä¹ˆå½±å“(impact)æˆ–è€…é£é™©(risk)ï¼Œæœ‰ä»€ä¹ˆé™åˆ¶,é¡¾è™‘(constraints)ç­‰ï¼Œæ‰€æœ‰å¯ä»¥ä¸ºä½œå‡ºå†³å®šçš„å†…å®¹éƒ½å¯ä»¥å†™åœ¨è¿™é‡Œ |
|ç›®æ ‡(Objective)| åˆ—å‡ºæ‰€æœ‰è¦è¾¾åˆ°çš„ç›®æ ‡|
|å¤‡é€‰æ–¹æ¡ˆ(Options)| ä»¥åˆ—è¡¨(`Option`)å½¢å¼åˆ—å‡ºæ‰€æœ‰çš„å¤‡é€‰æ–¹æ¡ˆ|
|ç›¸å…³å†³ç­–(Title)| å…³äºæ­¤æ¬¡å†³ç­–ç›¸å…³çš„ä¸€äº›å…¶ä»–è¾…åŠ©é“¾æ¥|
|çŠ¶æ€(Status)| æœ¬ ADR çš„çŠ¶æ€ï¼Œ`INPROGRESS`, `PROPOSED`, `PENDING`, `DECIDED`å’Œ`REJECTED` ä¸­çš„ä¸€ä¸ª|
|å†³å®š(Decision)| æ¥å—(`Accepted`)æˆ–è€…æ‹’ç»(`Rejected`)|
|å†³ç­–(Consequences)| é€‰æ‹©äº†å“ªä¸ªæ–¹æ¡ˆï¼Œæœ‰ä»€ä¹ˆåæœæˆ–è€…ä»£ä»·|

### è¯¦ç»†èƒŒæ™¯(Background)

å¦‚æœä»¥ä¸Šçš„è¡¨æ ¼å¹¶æ²¡æœ‰æ¸…æ¥šçš„è¯´æ˜é—®é¢˜ï¼Œé‚£ä¹ˆåœ¨è¿™å—å°±å¯ä»¥è¯¦ç»†è¯´æ˜äº†ã€‚

å»ºè®®ï¼š

* åœ¨é˜è¿°é—®é¢˜çš„æ—¶å€™å°½é‡ç”¨å›¾(æˆªå›¾ï¼Œç¤ºæ„å›¾ï¼Œè®¾è®¡å›¾ï¼Œæµç¨‹å›¾)æˆ–è€…è¡¨æ¥è¯´æ˜ï¼Œå› ä¸ºå›¾è¡¨æ¯”æ–‡å­—æ›´ç›´è§‚ï¼Œæ›´å®¹æ˜“ç†è§£ï¼›

### æ–¹æ¡ˆå¯¹æ¯”(Option Comparison)

ä»¥ä¸Šå†…å®¹å·²ç»è®©ä½ çš„ç”²æ–¹äº†è§£åˆ°äº†ä½ ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæ¥ä¸‹æ¥çš„å†…å®¹å°±æ˜¯åœ¨å„ä¸ªæ–¹æ¡ˆä¹‹é—´å¯¹æ¯”äº†ï¼Œå½“ç„¶ä½œä¸ºé™ˆè¿° ADR çš„äººï¼Œä½ å¿…é¡»æœ‰ä¸€ä¸ªä½ æ¨è(prefer)çš„æ–¹æ¡ˆã€‚

æ–¹æ¡ˆå¯¹æ¯”ä¸€èˆ¬ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œæ¯”å¦‚ï¼š

|æ–¹æ¡ˆ(Options)|æ–¹æ¡ˆè¯¦ç»†ä¿¡æ¯(Solution Details)|ä¼˜åŠ¿(pros)|åŠ£åŠ¿(Cons)|å†³ç­–åæœæˆ–ä»£ä»·(Consideration)|å¼€å‘æˆ–æµ‹è¯•æˆæœ¬(Dev&test Effort)|
|:-|:-|:-|:-|:-|:-|
|æ–¹æ¡ˆ1-option1 title|è¯¦ç»†ä¿¡æ¯|æœ‰å“ªäº›ä¼˜åŠ¿|æœ‰å“ªäº›åŠ£åŠ¿|æœ‰ä»€ä¹ˆè¦è¢«é¡¾è™‘| è¾ƒå°(Small), ä¸­ç­‰(Medium)ï¼Œ è¾ƒéš¾(High) ä¸­çš„ä¸€ä¸ª|
|æ–¹æ¡ˆ2-option1 title|è¯¦ç»†ä¿¡æ¯|æœ‰å“ªäº›ä¼˜åŠ¿|æœ‰å“ªäº›åŠ£åŠ¿|æœ‰ä»€ä¹ˆè¦è¢«é¡¾è™‘| è¾ƒå°(Small)|
|æ–¹æ¡ˆ3-option1 title|è¯¦ç»†ä¿¡æ¯|æœ‰å“ªäº›ä¼˜åŠ¿|æœ‰å“ªäº›åŠ£åŠ¿|æœ‰ä»€ä¹ˆè¦è¢«é¡¾è™‘| ä¸­ç­‰(Medium)|
|æ–¹æ¡ˆ4-option1 title|è¯¦ç»†ä¿¡æ¯|æœ‰å“ªäº›ä¼˜åŠ¿|æœ‰å“ªäº›åŠ£åŠ¿ | æœ‰ä»€ä¹ˆè¦è¢«é¡¾è™‘ | è¾ƒéš¾(High)|

### è®¨è®ºæ‹‰é€š(Discuss)

ä¸Šé¢æ‰€æœ‰åšçš„å·¥ä½œéƒ½æ˜¯ä¸ºè¿™ä¸€æ¬¡è®¨è®ºæœåŠ¡çš„ï¼Œåœ¨æ‹‰é€šçš„ä¼šè®®ä¸Šï¼Œéœ€è¦æ‹‰ä¸Šæ‰€æœ‰ä¸æœ¬æ¬¡å˜æ›´æœ‰å…³ç³»çš„äººï¼Œå½“ç„¶æœ€ä¸»è¦çš„æ˜¯å°†ç”²æ–¹çˆ¸çˆ¸æ‹‰ä¸Šï¼›åœ¨ä¼šè®®ä¸Šï¼Œä½ éœ€è¦å…ˆé™ˆè¿°ä¸Šä¸Šé¢çš„å†…å®¹ï¼Œæœ€åæŠŠé€‰æ‹©æƒäº¤åˆ°ç”²æ–¹çˆ¸çˆ¸æ‰‹é‡Œï¼Œåƒä¸‡ä¸è¦æŠŠç”²æ–¹çˆ¸çˆ¸çš„å”¯ä¸€çš„æƒåˆ©å‰¥å¤ºäº†ã€‚è‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚ğŸ˜„

åœ¨æ‰€æœ‰è®¨è®ºå®Œæ¯•ï¼Œè¦å°† ADR æ›´æ–°ï¼Œå¹¶æ›´æ–° ADR çš„æ€»ç»“éƒ¨åˆ†(Summary)ï¼Œ æ–¹ä¾¿åé¢çš„äººå¿«é€Ÿå¾—åˆ°å†³ç­–ä¿¡æ¯ã€‚

## å‚è€ƒé¡¹ç›®

* [MADR](https://adr.github.io/madr/) - Markdownæ¶æ„å†³ç­–è®°å½•ï¼ˆMADRï¼‰ã€‚ç²¾ç›ŠADRå¯å¿«é€Ÿè®°å½•ä»£ç ä¸­çš„æ¶æ„å†³ç­–ã€‚
* [adr-log: https://adr.github.io/adr-log/](https://adr.github.io/adr-log/) - ä»MADRç”Ÿæˆä½“ç³»ç»“æ„å†³ç­–æ—¥å¿—ã€‚
* [åµŒå…¥å¼æ¶æ„å†³ç­–è®°å½•:https://adr.github.io/e-adr/](https://adr.github.io/e-adr/)æ˜¾ç¤ºå¦‚ä½•é€šè¿‡ADRæ³¨é‡Šå°†åˆ†å¸ƒå¼ADæ—¥å¿—åµŒå…¥Javaä»£ç ä¸­ã€‚
* [eadlsync:https://adr.github.io/eadlsync/](https://adr.github.io/eadlsync/) - å°†åµŒå…¥å¼æ¶æ„å†³ç­–è®°å½•ä¸æ¶æ„å†³ç­–å­˜å‚¨åº“åŒæ­¥ã€‚
* [SE Repo: https://github.com/adr/serepo](https://github.com/adr/serepo) - è½¯ä»¶å·¥ç¨‹èµ„æ–™åº“ã€‚ç”¨äºç‰ˆæœ¬åŒ–è½¯ä»¶å·¥ç¨‹å·¥ä»¶çš„å­˜å‚¨åº“ï¼Œå¯ä»¥æ˜¯æ¶æ„å†³ç­–ï¼Œæ¨¡å¼ç­‰ã€‚

![Photo by Sheldon Liu](https://images.unsplash.com/photo-1569091791842-7cfb64e04797?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=675&q=80)

## æ€»ç»“

ADR åœ¨å¤§å‹é¡¹ç›®æˆ–è€…å¤§å…¬å¸çš„é¡¹ç›®ä¸­ç»å¸¸ä¼šç”¨åˆ°ï¼Œä¸ç®¡æ˜¯å¯¹ç°æœ‰ä¸šåŠ¡çš„æ¾„æ¸…æ€»ç»“ï¼Œè¿˜æ˜¯å¯¹ä¸ç¡®å®šçš„ä¸šåŠ¡çš„æ‹‰é€šéƒ½æœ‰ç§¯æä½œç”¨ã€‚å½“ç„¶ä¹Ÿæ˜¯ä¸€ä¸ª`ç”©é”…åˆ©å™¨`ã€‚

å»ºè®®ï¼š

* ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·æ¥ç®¡ç† ADR, æ¯”å¦‚[Confluence](https://www.atlassian.com/software/confluence),å›½å†…çš„è¯æœ‰[è¯­é›€](https://www.yuque.com/), [çŸ³å¢¨](https://shimo.im/), è¿˜æœ‰äº›ä»£ç ç®¡ç†å¹³å°ä¹Ÿæœ‰`Wiki`, å¦‚é˜¿é‡Œäº‘çš„[äº‘æ•ˆ](https://www.aliyun.com/product/yunxiao), è…¾è®¯çš„[Coding](https://coding.net/)ç­‰ï¼› å½“ç„¶å¦‚æœæ˜¯å°é¡¹ç›®ä¹Ÿå¯ä»¥å­˜åœ¨ä»£ç ä»“åº“ä¸­ã€‚

> ä¸‡äº‹çš†å¯æ³•ï¼›å·¥ä½œä¸­çš„å¤§éƒ¨åˆ†äº‹ç‰©éƒ½æ˜¯æœ‰å¥—è·¯çš„; æ„¿ä½ é€‰å¯¹å¥—è·¯ï¼Œå½’æ¥ä»æ˜¯é«˜æ•ˆ devã€‚

## Reference

* [åšå®¢:https://guzhongren.github.io/](https://guzhongren.github.io/)
* [å›¾åºŠ:https://sm.ms/](https://sm.ms/)
* [ADR: https://adr.github.io/](https://adr.github.io/)
* [æ¶æ„è®¾è®¡å®è·µä¹‹æ¶æ„å†³ç­–è®°å½•: https://zhuanlan.zhihu.com/p/141385447](https://zhuanlan.zhihu.com/p/141385447)
* [ã€è¯‘æ–‡ã€‘æ¶æ„å†³ç­–è®°å½•ï¼ˆArchitecture Decision Recordsï¼‰](https://www.phodal.com/blog/documenting-architecture-decisions/)

----
![å¾®ä¿¡å…¬ä¼—å·](https://s1.ax1x.com/2020/05/23/Yx1I5q.png)


